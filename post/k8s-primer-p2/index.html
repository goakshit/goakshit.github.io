<!doctype html><html lang>
<head>
<link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<title> Kubernetes: Core Concepts Primer - Part 2 | </title>
<link rel=canonical href=/post/k8s-primer-p2/>
<meta name=description content="Software Engineer | Go | Microservices | Docker | Kubernetes | Avid Reader">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=robots content="all,follow">
<meta name=googlebot content="index,follow,snippet,archive">
<meta property="og:title" content="Kubernetes: Core Concepts Primer - Part 2">
<meta property="og:description" content="Kubernetes: Core Concepts Primer - Part 2 What are ReplicaSets?  A ReplicaSet&rsquo;s purpose is to maintain a stable set of replica Pods running at any given time.
 In short, a ReplicaSet is a monitoring and management tool for Pods that ensures a desired number of Pods are running at any given time based on the selector criteria specified in the ReplicaSet.
Example:
# Create a ReplicaSet apiVersion: apps/v1  # Api Version that made replicaset available kind: ReplicaSet  # Kind of resource metadata: name: redis-rs labels: type: redis-backend spec: replicas: 3 # Desired number of replicas selector: matchLabels: type: redis-backend  # Label selector used for filtering pods template: metadata: name: redis-pod labels: type: redis-backend # Label used by replicaset for identifying pods spec: containers: - name: redis image: redis Commands associated with ReplicaSet:">
<meta property="og:type" content="article">
<meta property="og:url" content="/post/k8s-primer-p2/"><meta property="article:section" content="post">
<meta property="article:published_time" content="2021-08-01T18:14:56+05:30">
<meta property="article:modified_time" content="2021-08-01T18:14:56+05:30">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Kubernetes: Core Concepts Primer - Part 2">
<meta name=twitter:description content="Kubernetes: Core Concepts Primer - Part 2 What are ReplicaSets?  A ReplicaSet&rsquo;s purpose is to maintain a stable set of replica Pods running at any given time.
 In short, a ReplicaSet is a monitoring and management tool for Pods that ensures a desired number of Pods are running at any given time based on the selector criteria specified in the ReplicaSet.
Example:
# Create a ReplicaSet apiVersion: apps/v1  # Api Version that made replicaset available kind: ReplicaSet  # Kind of resource metadata: name: redis-rs labels: type: redis-backend spec: replicas: 3 # Desired number of replicas selector: matchLabels: type: redis-backend  # Label selector used for filtering pods template: metadata: name: redis-pod labels: type: redis-backend # Label used by replicaset for identifying pods spec: containers: - name: redis image: redis Commands associated with ReplicaSet:">
<link rel=stylesheet href=/css/styles.94f653e9e151e28067a7c5dbbc4600cbd5a3c721e79faaf971e523c40f3b249b8e4f20bb57810dfffa8d559ca5c140fd56eb4cd9c0853113ad08e66afdb08bdd.css integrity="sha512-lPZT6eFR4oBnp8XbvEYAy9WjxyHnn6r5ceUjxA87JJuOTyC7V4EN//qNVZylwUD9VutM2cCFMROtCOZq/bCL3Q=="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]-->
<link rel=icon type=image/png href=images/favicon.ico>
</head>
<body class="max-width mx-auto px3 ltr">
<div class="content index py4">
<header id=header>
<a href>
<div id=logo style=background-image:url(https://golang.org/doc/gopher/favicon.svg)></div>
<div id=title>
<h1></h1>
</div>
</a>
<div id=nav>
<ul>
<li class=icon>
<a href=# aria-label=Menu><i class="fas fa-bars fa-2x" aria-hidden=true></i></a>
</li>
<li><a href=/>Home</a></li>
<li><a href=/tags>Tags</a></li>
<li><a href=/about>About</a></li>
</ul>
</div>
</header>
<article class=post itemscope itemtype=http://schema.org/BlogPosting>
<div class=content itemprop=articleBody>
<h1 id=kubernetes-core-concepts-primer---part-2>Kubernetes: Core Concepts Primer - Part 2</h1>
<h2 id=what-are-replicasets>What are ReplicaSets?</h2>
<blockquote>
<p>A ReplicaSet&rsquo;s purpose is to maintain a stable set of replica Pods running at any given time.</p>
</blockquote>
<p>In short, a ReplicaSet is a monitoring and management tool for Pods that ensures a desired number of Pods are running at any given time based on the selector criteria specified in the ReplicaSet.</p>
<p>Example:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#75715e># Create a ReplicaSet</span>
<span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>apps/v1  </span> <span style=color:#75715e># Api Version that made replicaset available</span>
<span style=color:#f92672>kind</span>: <span style=color:#ae81ff>ReplicaSet     </span> <span style=color:#75715e># Kind of resource</span>
<span style=color:#f92672>metadata</span>:
    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>redis-rs</span>
    <span style=color:#f92672>labels</span>:
        <span style=color:#f92672>type</span>: <span style=color:#ae81ff>redis-backend</span>
<span style=color:#f92672>spec</span>:
    <span style=color:#f92672>replicas</span>: <span style=color:#ae81ff>3</span> <span style=color:#75715e># Desired number of replicas</span>
    <span style=color:#f92672>selector</span>:
        <span style=color:#f92672>matchLabels</span>:
            <span style=color:#f92672>type</span>: <span style=color:#ae81ff>redis-backend    </span> <span style=color:#75715e># Label selector used for filtering pods</span>
    <span style=color:#f92672>template</span>:
        <span style=color:#f92672>metadata</span>:
            <span style=color:#f92672>name</span>: <span style=color:#ae81ff>redis-pod</span>
            <span style=color:#f92672>labels</span>:
                <span style=color:#f92672>type</span>: <span style=color:#ae81ff>redis-backend</span> <span style=color:#75715e># Label used by replicaset for identifying pods</span>
        <span style=color:#f92672>spec</span>:
            <span style=color:#f92672>containers</span>:
                - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>redis</span>
                  <span style=color:#f92672>image</span>: <span style=color:#ae81ff>redis</span>
</code></pre></div><p>Commands associated with ReplicaSet:</p>
<ul>
<li>Create ReplicaSet <code>kubectl create -f &lt;RS_DEFINITION_FILE></code></li>
<li>Delete ReplicaSet <code>kubectl delete replicaset &lt;RS_NAME></code></li>
<li>List ReplicaSet <code>kubectl get &lt;RS_NAME></code></li>
<li>Update ReplicaSet:
<ul>
<li>By updating the replicas in the definition file, <code>kubectl replace -f &lt;RS_DEFINITION_FILE></code></li>
<li>By updating the replicas in the running ReplicaSet, <code>kubectl scale replicaset &lt;RS_NAME> --replicas=&lt;NUM_REPLICAS></code>. <strong>Note: This won&rsquo;t update the ReplicaSet definition file.</strong></li>
</ul>
</li>
</ul>
<h2 id=what-are-deployments>What are Deployments?</h2>
<blockquote>
<p>A Kubernetes deployment is a resource object in Kubernetes that provides declarative updates to applications. A deployment allows you to describe an application’s life cycle, such as which images to use for the app, the number of pods there should be, and the way in which they should be updated.</p>
</blockquote>
<p>Example:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#75715e># Create a deployment</span>
<span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>apps/v1  </span> <span style=color:#75715e># Api Version that made deployment available</span>
<span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Deployment     </span> <span style=color:#75715e># Kind of resource</span>
<span style=color:#f92672>metadata</span>:
    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>redis-deployment</span>
    <span style=color:#f92672>labels</span>:
        <span style=color:#f92672>type</span>: <span style=color:#ae81ff>redis-backend</span>
<span style=color:#f92672>spec</span>:
    <span style=color:#f92672>replicas</span>: <span style=color:#ae81ff>3</span> <span style=color:#75715e># Desired number of replicas</span>
    <span style=color:#f92672>selector</span>:
        <span style=color:#f92672>matchLabels</span>:
            <span style=color:#f92672>type</span>: <span style=color:#ae81ff>redis-backend    </span> <span style=color:#75715e># Label selector used for filtering pods</span>
    <span style=color:#f92672>template</span>:
        <span style=color:#f92672>metadata</span>:
            <span style=color:#f92672>name</span>: <span style=color:#ae81ff>redis-pod</span>
            <span style=color:#f92672>labels</span>:
                <span style=color:#f92672>type</span>: <span style=color:#ae81ff>redis-backend</span> <span style=color:#75715e># Label used by replicaset for identifying pods</span>
        <span style=color:#f92672>spec</span>:
            <span style=color:#f92672>containers</span>:
                - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>redis</span>
                  <span style=color:#f92672>image</span>: <span style=color:#ae81ff>redis</span>
</code></pre></div><p>Imperative command: <code>kubectl create deployment &lt;DEPLOYMENT_NAME> --image=&lt;IMAGE_NAME> --replicas=&lt;REPLICA_COUNT></code></p>
<h2 id=what-are-namespaces>What are Namespaces?</h2>
<blockquote>
<p>Namespaces are a way to organize clusters into virtual sub-clusters — they can be helpful when different teams or projects share a Kubernetes cluster.</p>
</blockquote>
<p>By default, a Kubernetes cluster has a single namespace called <code>default</code>. Unless explicitely specified, all resources created in the cluster will be in the <code>default</code> namespace.</p>
<p>To create a k8s object in a different namespace, you need to specify the namespace as argument. Eg: <code>kubectl create -f &lt;DEFINITION_FILE> --namespace=&lt;NAMESPACE></code></p>
<p>To create a namespace:</p>
<ul>
<li>Run <code>kubectl create namespace &lt;NAMESPACE></code></li>
<li>Run <code>kubectl create -f &lt;NAMESPACE_DEFINITION_FILE></code></li>
</ul>
<p>Example:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#75715e># To Create a namespace</span>
<span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
<span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Namespace</span>
<span style=color:#f92672>metadata</span>:
    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>dev</span>
</code></pre></div><p>To view pods in all namespaces: Run <code>kubectl get pods --all-namespaces</code></p>
<h3 id=resources-in-a-namespace-can-be-restricted-using-the-following-yaml>Resources in a namespace can be restricted using the following yaml:</h3>
<p><code>kubectl create -f &lt;RESOURCE_QUOTE_DEFINITION_FILE></code></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
<span style=color:#f92672>kind</span>: <span style=color:#ae81ff>ResourceQuota</span>
<span style=color:#f92672>metadata</span>:
    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>dev-rq</span>
    <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>dev</span>
<span style=color:#f92672>spec</span>:
    <span style=color:#f92672>hard</span>:
        <span style=color:#f92672>pods</span>: <span style=color:#e6db74>&#34;10&#34;</span>
        <span style=color:#f92672>requests.cpu</span>: <span style=color:#e6db74>&#34;100m&#34;</span>
</code></pre></div><h2 id=continue-reading-kubernetes-core-concepts-primer---part-3k8s-primer-p3><strong>Continue reading</strong>: <a href=../k8s-primer-p3/>Kubernetes: Core Concepts Primer - Part 3</a></h2>
</div>
</article>
<footer id=footer>
<div class=footer-left>
Copyright &copy; 2021
</div>
<div class=footer-right>
<nav>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/tags>Tags</a></li>
<li><a href=/about>About</a></li>
</ul>
</nav>
</div>
</footer>
</div>
</body>
<link rel=stylesheet href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
</html>